generator client {
  provider = "prisma-client-js"
  output   = "../../generated/prisma"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model categories {
  id_category String     @id @default(uuid()) @db.VarChar(50)
  name        String     @unique @db.VarChar(100)
  description String?
  createdAt   DateTime   @default(now()) @db.Timestamptz(0)
  updatedAt   DateTime   @updatedAt @db.Timestamptz(0)
  products    products[]
}

model products {
  id_product       String             @id @default(uuid()) @db.VarChar(50)
  id_category      String             @db.VarChar(255)
  SKU              String             @db.VarChar(255)
  name             String             @db.VarChar(50)
  description      String?            @db.Text
  image            String?            @db.Text
  isActive         Boolean
  categories       categories         @relation(fields: [id_category], references: [id_category], onDelete: NoAction, onUpdate: NoAction, map: "products_id")
  createdAt        DateTime           @default(now()) @db.Timestamptz(0)
  updatedAt        DateTime           @updatedAt @db.Timestamptz(0)
  stocks           stocks[]
  transaction_logs transaction_logs[]
}

model session {
  id_session String    @id @default(uuid()) @db.VarChar(50)
  id_user    String    @db.VarChar(255)
  token      String    @db.Text
  role       user_role @default(user)
  isActive   Boolean
  createdAt  DateTime  @default(now()) @db.Timestamptz(0)
  updatedAt  DateTime  @updatedAt @db.Timestamptz(0)
  users      users     @relation(fields: [id_user], references: [id_user], onDelete: NoAction, onUpdate: NoAction, map: "fk_session_user")
}

model stocks {
  id_stock   String   @id @default(uuid()) @db.VarChar(50)
  id_product String   @db.VarChar(255)
  amount     Int
  price      Int
  createdAt  DateTime @default(now()) @db.Timestamptz(0)
  updatedAt  DateTime @updatedAt @db.Timestamptz(0)
  products   products @relation(fields: [id_product], references: [id_product], onDelete: NoAction, onUpdate: NoAction, map: "id_product")
}

model transaction_logs {
  id_transaction String           @id @default(uuid()) @db.VarChar(50)
  id_user        String           @db.VarChar(255)
  id_product     String           @db.VarChar(255)
  amount         Int
  date           DateTime         @db.Date
  price          Int
  type           transaction_type
  description    String           @db.Text
  createdAt      DateTime         @default(now()) @db.Timestamptz(0)
  updatedAt      DateTime         @updatedAt @db.Timestamptz(0)
  products       products         @relation(fields: [id_product], references: [id_product], onDelete: NoAction, onUpdate: NoAction, map: "id_product")
  users          users            @relation(fields: [id_user], references: [id_user], onDelete: NoAction, onUpdate: NoAction, map: "id_user")
}

model users {
  id_user          String             @id @default(uuid()) @db.VarChar(50)
  name             String             @db.VarChar(50)
  email            String             @unique @db.VarChar(50)
  password         String             @db.VarChar()
  contact          String             @db.VarChar(50)
  image            String?            @db.Text
  address          String             @db.Text
  role             user_role          @default(user)
  isActive         Boolean
  createdAt        DateTime           @default(now()) @db.Timestamptz(0)
  updatedAt        DateTime           @default(now()) @updatedAt @db.Timestamptz(0)
  session          session[]
  transaction_logs transaction_logs[]
}

enum transaction_type {
  buy
  sell
}

enum user_role {
  user
  admin
}
